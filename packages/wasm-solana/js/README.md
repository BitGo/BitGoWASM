# Purpose

This directory provides TypeScript wrappers over the WASM bindings generated by `wasm-pack`.

While `wasm-bindgen` generates usable TypeScript types, this wrapper layer provides:

- Better TypeScript signatures with precise types
- `camelCase` method names (JavaScript convention) wrapping `snake_case` WASM methods (Rust convention)
- Encapsulation of WASM instances with private constructors

## Architecture

This package follows the **Class Wrapper Pattern**.

### Class Wrapper Pattern

Used for stateful objects that maintain WASM instances (e.g., `Keypair`, `Pubkey`).

**Characteristics:**

- Private `_wasm` property holds the underlying WASM instance
- Private constructor prevents direct instantiation
- Static factory methods (camelCase) for object creation
- Instance methods (camelCase) wrap WASM methods
- Public `wasm` getter for internal access (marked `@internal`)

### Example

Given a WASM-generated class:

```typescript
// wasm/wasm_solana.d.ts (generated by wasm-bindgen)
export class WasmKeypair {
  static from_secret_key(secret_key: Uint8Array): WasmKeypair;
  readonly public_key: Uint8Array;
  address(): string;
}
```

We create a wrapper class:

```typescript
// keypair.ts
import { WasmKeypair } from "./wasm/wasm_solana.js";

export class Keypair {
  private constructor(private _wasm: WasmKeypair) {}

  // Static factory method (camelCase)
  static fromSecretKey(secretKey: Uint8Array): Keypair {
    const wasm = WasmKeypair.from_secret_key(secretKey);
    return new Keypair(wasm);
  }

  // Property getter (camelCase) accesses snake_case WASM property
  get publicKey(): Uint8Array {
    return this._wasm.public_key;
  }

  // Instance method (camelCase) calls snake_case WASM method
  getAddress(): string {
    return this._wasm.address();
  }

  /** @internal */
  get wasm(): WasmKeypair {
    return this._wasm;
  }
}
```

### Main Entry Point

The `index.ts` file exports:

- Namespace exports for explicit imports (`export * as keypair`)
- Top-level class exports for convenience (`export { Keypair }`)

```typescript
// index.ts
export * as keypair from "./keypair.js";
export * as pubkey from "./pubkey.js";

export { Keypair } from "./keypair.js";
export { Pubkey } from "./pubkey.js";
```

## Naming Conventions

| Layer      | Convention   | Example                         |
| ---------- | ------------ | ------------------------------- |
| Rust WASM  | `snake_case` | `from_secret_key`, `public_key` |
| TypeScript | `camelCase`  | `fromSecretKey`, `publicKey`    |

**Important:** Rust exports use `snake_case` with no `js_name` overrides. TypeScript wrappers handle the conversion to `camelCase`.
